/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/resemblejs@3.2.3/resemble.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var isNode=new Function("return (typeof process !== 'undefined') && process.versions && process.versions.node");!function(e,r){"use strict";"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports?module.exports=r():e.resemble=r()}(this,function(){"use strict";var e,r,n;function t(e,n){if(isNode())return r.createCanvas(e,n);var t=document.createElement("canvas");return t.width=e,t.height=n,t}isNode()?(r=require("canvas"),e=r.Image,n=r.loadImage):e=Image;var o={},i=o,a=function(r){var a,u,f,s,h,g=1,l={red:255,green:0,blue:255,alpha:255},c={r:0,g:0,b:0,a:0},d={flat:function(e,r){e[r]=l.red,e[r+1]=l.green,e[r+2]=l.blue,e[r+3]=l.alpha},movement:function(e,r,n,t){e[r]=(t.r*(l.red/255)+l.red)/2,e[r+1]=(t.g*(l.green/255)+l.green)/2,e[r+2]=(t.b*(l.blue/255)+l.blue)/2,e[r+3]=t.a},flatDifferenceIntensity:function(e,r,n,t){e[r]=l.red,e[r+1]=l.green,e[r+2]=l.blue,e[r+3]=D(n,t)},movementDifferenceIntensity:function(e,r,n,t){var o=D(n,t)/255*.8;e[r]=(1-o)*(t.r*(l.red/255))+o*l.red,e[r+1]=(1-o)*(t.g*(l.green/255))+o*l.green,e[r+2]=(1-o)*(t.b*(l.blue/255))+o*l.blue,e[r+3]=t.a},diffOnly:function(e,r,n,t){e[r]=t.r,e[r+1]=t.g,e[r+2]=t.b,e[r+3]=t.a}},m=d.flat,b=1200,p=!0,v={},w=[],y=[],x={red:16,green:16,blue:16,alpha:16,minBrightness:16,maxBrightness:240},B=!1,M=!1,I=!1,C=!1;function D(e,r){return(Math.abs(e.r-r.r)+Math.abs(e.g-r.g)+Math.abs(e.b-r.b))/3}function T(e,r,n,t,o){return e>(o.left||0)&&e<(o.right||n)&&r>(o.top||0)&&r<(o.bottom||t)}function S(){var e,r=y.length;for(e=0;e<r;e++)"function"==typeof y[e]&&y[e](v)}function A(e,r,n){var t,o;for(t=0;t<e;t++)for(o=0;o<r;o++)n(t,o)}function k(e,r){var n=e.width,o=e.height;I&&1===w.length&&(n=w[0].width,o=w[0].height);var i,a=t(n,o);a.getContext("2d").drawImage(e,0,0,n,o),i=a.getContext("2d").getImageData(0,0,n,o),w.push(i),r(i,n,o)}function N(r,t){var o,i=new e;i.setAttribute||(i.setAttribute=function(){}),p&&i.setAttribute("crossorigin","anonymous"),i.onerror=function(e){i.onload=null,i.onerror=null,w.push({error:e?e+"":"Image load error."}),t()},i.onload=function(){i.onload=null,i.onerror=null,k(i,t)},"string"==typeof r?(i.src=r,!isNode()&&i.complete&&i.naturalWidth>0&&i.onload()):void 0!==r.data&&"number"==typeof r.width&&"number"==typeof r.height?(w.push(r),t(r,r.width,r.height)):"undefined"!=typeof Buffer&&r instanceof Buffer?n(r).then(function(e){i.onload=null,i.onerror=null,k(e,t)}).catch(function(e){w.push({error:e?e+"":"Image load error."}),t()}):((o=new FileReader).onload=function(e){i.src=e.target.result},o.readAsDataURL(r))}function E(e,r,n){var t=Math.abs(e-r);return void 0!==e&&(void 0!==r&&(e===r||t<x[n]))}function O(e,r){var n=E(e.a,r.a,"alpha");return E(e.brightness,r.brightness,"minBrightness")&&n}function P(e,r,n){return.3*e+.59*r+.11*n}function R(e,r){var n=e.r===r.r,t=e.g===r.g,o=e.b===r.b;return n&&t&&o}function z(e,r,n,t,o,i){var a,u,f,s,h=0,g=0,l=0;for(W(e),a=-1;a<=1;a++)for(u=-1;u<=1;u++)if(0===a&&0===u);else{if(!F(c,r,4*((t+u)*i+(o+a))))continue;if(U(c),W(c),f=e,s=c,Math.abs(f.brightness-s.brightness)>x.maxBrightness&&h++,R(e,c)&&l++,Math.abs(c.h-e.h)>.3&&g++,g>1||h>1)return!0}return l<2}function L(e,r,n){"diffOnly"!==a&&(e[r]=n.brightness,e[r+1]=n.brightness,e[r+2]=n.brightness,e[r+3]=n.a*g)}function F(e,r,n){return r.length>n&&(e.r=r[n],e.g=r[n+1],e.b=r[n+2],e.a=r[n+3],!0)}function U(e){e.brightness=P(e.r,e.g,e.b)}function W(e){e.h=function(e,r,n){var t,o,i=e/255,a=r/255,u=n/255,f=Math.max(i,a,u),s=Math.min(i,a,u);if(f===s)t=0;else switch(o=f-s,f){case i:t=(a-u)/o+(a<u?6:0);break;case a:t=(u-i)/o+2;break;case u:t=(i-a)/o+4;break;default:t/=6}return t}(e.r,e.g,e.b)}function j(e,r,n,o){var i,l,c,d,p=e.data,w=r.data;C||(i=t(n,o),l=i.getContext("2d"),c=l.createImageData(n,o),d=c.data);var y,x=0,I={top:o,left:n,bottom:0,right:0},S=function(e,r){I.left=Math.min(e,I.left),I.right=Math.max(e,I.right),I.top=Math.min(r,I.top),I.bottom=Math.max(r,I.bottom)},k=Date.now();b&&B&&(n>b||o>b)&&(y=6);var N={r:0,g:0,b:0,a:0},P={r:0,g:0,b:0,a:0},R=!1;A(n,o,function(e,r){if(!R&&(!y||r%y!=0&&e%y!=0)){var t=4*(r*n+e);if(F(N,p,t)&&F(P,w,t)){var i,l,c,b,v,I,A=function(e,r,n,t,o){var i,a,h,g=!0;if(u instanceof Array)for(a=!1,i=0;i<u.length;i++)if(T(e,r,n,t,u[i])){a=!0;break}if(f instanceof Array)for(h=!0,i=0;i<f.length;i++)if(T(e,r,n,t,f[i])){h=!1;break}return s?0!==D(o,s):void 0===a&&void 0===h||(!1!==a||!0!==h)&&(!0!==a&&!0!==h||(g=!0),!1!==a&&!1!==h||(g=!1),g)}(e,r,n,o,P);if(M)return U(N),U(P),void(O(N,P)||!A?C||L(d,t,P):(C||m(d,t,N,P),x++,S(e,r)));if(c=E((i=N).r,(l=P).r,"red"),b=E(i.g,l.g,"green"),v=E(i.b,l.b,"blue"),I=E(i.a,l.a,"alpha"),c&&b&&v&&I||!A?C||function(e,r,n){"diffOnly"!==a&&(e[r]=n.r,e[r+1]=n.g,e[r+2]=n.b,e[r+3]=n.a*g)}(d,t,N):B&&(U(N),U(P),z(N,p,0,r,e,n)||z(P,w,0,r,e,n))&&(O(N,P)||!A)?C||L(d,t,P):(C||m(d,t,N,P),x++,S(e,r)),C)x/(o*n)*100>h&&(R=!0)}}}),v.rawMisMatchPercentage=x/(o*n)*100,v.misMatchPercentage=v.rawMisMatchPercentage.toFixed(2),v.diffBounds=I,v.analysisTime=Date.now()-k,v.getImageDataUrl=function(e){if(C)throw Error("No diff image available - ran in compareOnly mode");var r=0;return e&&(r=function(e,r,n){r.font="12px sans-serif";var t=r.measureText(e).width+4;t>n.width&&(n.width=t);return n.height+=22,r.fillStyle="#666",r.fillRect(0,0,n.width,18),r.fillStyle="#fff",r.fillRect(0,18,n.width,4),r.fillStyle="#fff",r.textBaseline="top",r.font="12px sans-serif",r.fillText(e,2,1),22}(e,l,i)),l.putImageData(c,0,r),i.toDataURL("image/png")},!C&&i.toBuffer&&(v.getBuffer=function(n){if(n){var t=i.width+2;i.width=3*t,l.putImageData(e,0,0),l.putImageData(r,t,0),l.putImageData(c,2*t,0)}else l.putImageData(c,0,0);return i.toBuffer()})}function q(e,r,n){var o;return e.height<n||e.width<r?((o=t(r,n).getContext("2d")).putImageData(e,0,0),o.getImageData(0,0,r,n)):e}function G(e){var r;if(e.errorColor)for(r in e.errorColor)e.errorColor.hasOwnProperty(r)&&(l[r]=void 0===e.errorColor[r]?l[r]:e.errorColor[r]);e.errorType&&d[e.errorType]&&(m=d[e.errorType],a=e.errorType),e.errorPixel&&"function"==typeof e.errorPixel&&(m=e.errorPixel),g=isNaN(Number(e.transparency))?g:e.transparency,void 0!==e.largeImageThreshold&&(b=e.largeImageThreshold),void 0!==e.useCrossOrigin&&(p=e.useCrossOrigin),void 0!==e.boundingBox&&(u=[e.boundingBox]),void 0!==e.ignoredBox&&(f=[e.ignoredBox]),void 0!==e.boundingBoxes&&(u=e.boundingBoxes),void 0!==e.ignoredBoxes&&(f=e.ignoredBoxes),void 0!==e.ignoreAreasColoredWith&&(s=e.ignoreAreasColoredWith)}function H(e){var n,t="function"==typeof e;t||(n=e);var a={setReturnEarlyThreshold:function(e){return e&&(C=!0,h=e),a},scaleToSameSize:function(){return I=!0,t&&e(),a},useOriginalSize:function(){return I=!1,t&&e(),a},ignoreNothing:function(){return x.red=0,x.green=0,x.blue=0,x.alpha=0,x.minBrightness=0,x.maxBrightness=255,B=!1,M=!1,t&&e(),a},ignoreLess:function(){return x.red=16,x.green=16,x.blue=16,x.alpha=16,x.minBrightness=16,x.maxBrightness=240,B=!1,M=!1,t&&e(),a},ignoreAntialiasing:function(){return x.red=32,x.green=32,x.blue=32,x.alpha=32,x.minBrightness=64,x.maxBrightness=96,B=!0,M=!1,t&&e(),a},ignoreColors:function(){return x.alpha=16,x.minBrightness=16,x.maxBrightness=240,B=!1,M=!0,t&&e(),a},ignoreAlpha:function(){return x.red=16,x.green=16,x.blue=16,x.alpha=255,x.minBrightness=16,x.maxBrightness=240,B=!1,M=!1,t&&e(),a},repaint:function(){return t&&e(),a},outputSettings:function(e){return G(e),a},onComplete:function(e){y.push(e);var t=function(){!function(e,r){function n(){var e,r;if(2===w.length){if(w[0].error||w[1].error)return(v={}).error=w[0].error?w[0].error:w[1].error,void S();e=w[0].width>w[1].width?w[0].width:w[1].width,r=w[0].height>w[1].height?w[0].height:w[1].height,w[0].width===w[1].width&&w[0].height===w[1].height?v.isSameDimensions=!0:v.isSameDimensions=!1,v.dimensionDifference={width:w[0].width-w[1].width,height:w[0].height-w[1].height},j(q(w[0],e,r),q(w[1],e,r),e,r),S()}}i!==o&&G(i),w=[],N(e,n),N(r,n)}(r,n)};return t(),H(t)}};return a}var J={onComplete:function(e){y.push(e),N(r,function(e,r,n){!function(e,r,n){var t=0,o=0,i=0,a=0,u=0,f=0,s=0,h=0;A(r,n,function(n,g){var l=4*(g*r+n),c=e[l],d=e[l+1],m=e[l+2],b=e[l+3],p=P(c,d,m);c===d&&c===m&&b&&(0===c?h++:255===c&&s++),t++,o+=c/255*100,i+=d/255*100,a+=m/255*100,u+=(255-b)/255*100,f+=p/255*100}),v.red=Math.floor(o/t),v.green=Math.floor(i/t),v.blue=Math.floor(a/t),v.alpha=Math.floor(u/t),v.brightness=Math.floor(f/t),v.white=Math.floor(s/t*100),v.black=Math.floor(h/t*100),S()}(e.data,r,n)})},compareTo:function(e){return H(e)},outputSettings:function(e){return G(e),J}};return J};function u(e,r){switch(r){case"nothing":e.ignoreNothing();break;case"less":e.ignoreLess();break;case"antialiasing":e.ignoreAntialiasing();break;case"colors":e.ignoreColors();break;case"alpha":e.ignoreAlpha();break;default:throw new Error("Invalid ignore: "+r)}}return a.compare=function(e,r,n,t){var o,i;"function"==typeof n?(o=n,i={}):(o=t,i=n||{});var f,s=a(e);i.output&&s.outputSettings(i.output),f=s.compareTo(r),i.returnEarlyThreshold&&f.setReturnEarlyThreshold(i.returnEarlyThreshold),i.scaleToSameSize&&f.scaleToSameSize(),"string"==typeof i.ignore?u(f,i.ignore):i.ignore&&i.ignore.forEach&&i.ignore.forEach(function(e){u(f,e)}),f.onComplete(function(e){e.error?o(e.error):o(null,e)})},a.outputSettings=function(e){return i=e,a},a});
//# sourceMappingURL=/sm/89a41eac3d964e0c5efe9c9138e11c07ebd4fee7cbf151e6bf47d86bb1a089a2.map